<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIA Protection Gap Calculator - Singapore</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary-blue: #1e40af;
            --secondary-blue: #3b82f6;
            --success-green: #10b981;
            --warning-orange: #f59e0b;
            --danger-red: #ef4444;
        }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .section-nav { 
            display: flex; gap: 0.5rem; margin-bottom: 2rem; 
            font-weight: 500; font-size: 0.95rem;
        }
        .section-nav .active { 
            color: var(--primary-blue); font-weight: 700; 
            border-bottom: 3px solid var(--primary-blue);
        }
        .section-nav span:not(.active) { 
            color: #6b7280; cursor: pointer; padding: 0.25rem 0; 
        }
        .protection-status {
            text-align: center; padding: 2rem; border-radius: 12px; 
            margin-bottom: 2rem; font-weight: 600;
        }
        .status-gap { background: linear-gradient(135deg, #fee2e2, #fecaca); border: 2px solid var(--danger-red); color: #dc2626; }
        .status-moderate { background: linear-gradient(135deg, #fef3c7, #fde68a); border: 2px solid var(--warning-orange); color: #d97706; }
        .status-well { background: linear-gradient(135deg, #d1fae5, #a7f3d0); border: 2px solid var(--success-green); color: #047857; }
        .input-group { margin-bottom: 1.5rem; }
        .input-row { display: flex; gap: 1rem; margin-bottom: 1.5rem; }
        .input-row .input-group { flex: 1; }
        input[type="number"], select, input[type="range"] { 
            width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; 
            border-radius: 8px; font-size: 1rem; transition: all 0.2s;
        }
        input[type="range"] { padding: 0.5rem 0; height: 8px; }
        input:focus, select:focus { outline: none; border-color: var(--primary-blue); box-shadow: 0 0 0 3px rgba(30,64,175,0.1); }
        .checkbox-group label { display: flex; align-items: center; font-weight: 500; cursor: pointer; }
        .checkbox-group input[type="checkbox"] { width: 20px; height: 20px; margin-right: 0.75rem; accent-color: var(--primary-blue); }
        .conditional-input { display: none; margin-top: 0.75rem; }
        .conditional-input.show { display: block; }
        small { display: block; color: #6b7280; font-size: 0.875rem; margin-top: 0.5rem; }
        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .btn-primary { 
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue)); 
            color: white; padding: 1rem 2.5rem; border: none; border-radius: 12px; 
            font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s;
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(30,64,175,0.3); }
        .btn-nav { background: none; border: none; color: #6b7280; cursor: pointer; padding: 0.5rem 1rem; font-size: 1rem; }
        .btn-nav:hover { color: var(--primary-blue); }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen py-12 px-4">
    <div class="max-w-3xl mx-auto bg-white/80 backdrop-blur-xl shadow-2xl rounded-3xl p-10 border border-white/50">
        
        <!-- Header -->
        <div class="text-center mb-10">
            <h1 class="text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-4">
                HOW WELL PROTECTED ARE YOU?
            </h1>
            <p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">
                Assess your protection gap and ensure your loved ones remain financially secure
            </p>
        </div>

        <!-- Protection Status -->
        <div id="protectionStatus" class="protection-status status-gap" style="display: none;">
            <div class="text-2xl font-bold mb-3">Please note that you are currently facing a protection gap</div>
            <div class="text-lg">as the value of your resources is lower than your overheads 
                *(i.e., your protection level <span class="font-bold text-red-700">is below</span> the baseline of 60%)*
            </div>
            <div class="text-sm mt-3 font-medium">Please take the necessary actions today to narrow your protection gap</div>
        </div>

        <!-- Section Navigation -->
        <div class="section-nav">
            <span class="active" data-section="1">1. About you</span>
            <span data-section="2">2. About your family</span>
            <span data-section="3">3. About your financial overheads</span>
            <span data-section="4">4. About your financial resources</span>
        </div>

        <!-- SECTION 1: About You (EXACT LIA) -->
        <section id="section1" class="section active">
            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-4">What is your age?</label>
                <input type="range" id="age" min="0" max="100" value="52" class="w-full h-4 bg-gray-200 rounded-lg cursor-pointer">
                <div class="flex justify-between text-sm text-gray-600 mt-3"><span>0 years old</span><span id="ageValue">52</span><span>100 years old</span></div>
            </div>

            <div class="input-group">
                <label class="block text-lg font-semibold text-gray-900 mb-3">What is your current marital status?</label>
                <select id="maritalStatus">
                    <option>Single</option>
                    <option>Married</option>
                    <option>Divorced</option>
                    <option>Widowed</option>
                </select>
            </div>

            <div class="input-group">
                <label class="block text-lg font-semibold text-gray-900 mb-3">Is your spouse working?</label>
                <select id="spouseWorking">
                    <option>No</option>
                    <option>Yes</option>
                </select>
            </div>

            <div class="input-row">
                <div class="input-group">
                    <label class="block text-lg font-semibold text-gray-900 mb-3">Dependant children WITHOUT special needs?</label>
                    <input type="number" id="childrenNormal" min="0" value="0">
                </div>
                <div class="input-group">
                    <label class="block text-lg font-semibold text-gray-900 mb-3">Dependant children WITH special needs?</label>
                    <input type="number" id="childrenSpecial" min="0" value="0">
                </div>
            </div>

            <div class="input-group">
                <label class="text-lg font-medium text-gray-700 mb-2">Total number of dependent children: <span id="totalChildren">0</span></label>
            </div>

            <div class="input-group">
                <label class="block text-lg font-semibold text-gray-900 mb-3">Do you have other dependants?</label>
                <input type="number" id="otherDependants" min="0" value="0">
            </div>

            <div class="input-group">
                <label class="block text-lg font-semibold text-gray-900 mb-3">Mortality Insurance Coverage (S$)</label>
                <input type="number" id="mortalityCoverage" value="100000" min="0">
                <small class="text-blue-600">Pre-set value calculated for your profile. Edit for accuracy.</small>
            </div>

            <div class="input-group">
                <label class="block text-lg font-semibold text-gray-900 mb-3">Critical Illness Insurance Coverage (S$)</label>
                <input type="number" id="ciCoverage" value="50000" min="0">
                <small class="text-blue-600">Pre-set value calculated for your profile. Edit for accuracy.</small>
            </div>

            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-4">Expected Critical Illness Recovery Period?</label>
                <input type="range" id="ciRecoveryPeriod" min="0" max="7" value="5" step="1" class="w-full h-4 bg-gray-200 rounded-lg cursor-pointer">
                <div class="flex justify-between text-sm text-gray-600 mt-3">
                    <span>0 years</span>
                    <span id="ciRecoveryValue">5</span>
                    <span>7 years</span>
                </div>
            </div>
        </section>

        <!-- SECTION 2: About your family (EXACT LIA) -->
        <section id="section2" class="section">
            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-3">On average, how much do you earn in a year? (S$)</label>
                <input type="number" id="annualIncome" value="120000" min="0">
                <small class="text-blue-600">Pre-set value calculated for your profile. Edit for accuracy.</small>
            </div>

            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-4">What is your spouse's age?</label>
                <input type="range" id="spouseAge" min="0" max="100" value="52" class="w-full h-4 bg-gray-200 rounded-lg cursor-pointer">
                <div class="flex justify-between text-sm text-gray-600 mt-3"><span>0 years old</span><span id="spouseAgeValue">52</span><span>100 years old</span></div>
            </div>

            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-4">Age of each dependent child WITHOUT special needs</label>
                <input type="range" id="childAgeNormal" min="0" max="100" value="20" class="w-full h-4 bg-gray-200 rounded-lg cursor-pointer">
                <div class="flex justify-between text-sm text-gray-600 mt-3"><span>0 years old</span><span id="childAgeNormalValue">20</span><span>100 years old</span></div>
            </div>

            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-4">Age of each dependent child WITH special needs</label>
                <input type="range" id="childAgeSpecial" min="0" max="100" value="17" class="w-full h-4 bg-gray-200 rounded-lg cursor-pointer">
                <div class="flex justify-between text-sm text-gray-600 mt-3"><span>0 years old</span><span id="childAgeSpecialValue">17</span><span>100 years old</span></div>
            </div>

            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-4">Age of each of your other dependants</label>
                <input type="range" id="otherDependantAge" min="0" max="100" value="77" class="w-full h-4 bg-gray-200 rounded-lg cursor-pointer">
                <div class="flex justify-between text-sm text-gray-600 mt-3"><span>0 years old</span><span id="otherDependantAgeValue">77</span><span>100 years old</span></div>
            </div>

            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-4">Overall life expectancy of all dependants</label>
                <input type="range" id="dependantsLifeExpectancy" min="0" max="100" value="88" class="w-full h-4 bg-gray-200 rounded-lg cursor-pointer">
                <div class="flex justify-between text-sm text-gray-600 mt-3"><span>0 years old</span><span id="lifeExpectancyValue">88</span><span>100 years old</span></div>
            </div>
        </section>

        <!-- SECTION 3: About your financial overheads (EXACT LIA) -->
        <section id="section3" class="section">
            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-3">For properties that you own: Do you currently own any mortgage loan?</label>
                <label class="flex items-center mb-3">
                    <input type="checkbox" id="hasMortgage" class="w-5 h-5 text-blue-600 mr-3">
                    Yes, remaining mortgage loan amount (S$)
                </label>
                <input type="number" id="mortgageAmount" value="300000" min="0" class="conditional-input">
                <small class="text-blue-600">Pre-set value calculated for your profile. Edit for accuracy.</small>
            </div>

            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-4">How many years do you have left on your outstanding mortgage loans?</label>
                <input type="range" id="mortgageYearsLeft" min="1" max="40" value="15" class="w-full h-4 bg-gray-200 rounded-lg cursor-pointer">
                <div class="flex justify-between text-sm text-gray-600 mt-3"><span>1 year</span><span id="mortgageYearsValue">15</span><span>40 years</span></div>
            </div>

            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-3">For personal loans: Do you currently own any personal loan?</label>
                <label class="flex items-center mb-3">
                    <input type="checkbox" id="hasPersonalLoan" class="w-5 h-5 text-blue-600 mr-3">
                    Yes, remaining personal loan amount (S$)
                </label>
                <input type="number" id="personalLoanAmount" value="50000" min="0" class="conditional-input">
                <small class="text-blue-600">Pre-set value calculated for your profile. Edit for accuracy.</small>
            </div>

            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-4">How many years do you have left on your outstanding personal loans?</label>
                <input type="range" id="personalLoanYears" min="1" max="10" value="4" class="w-full h-4 bg-gray-200 rounded-lg cursor-pointer">
                <div class="flex justify-between text-sm text-gray-600 mt-3"><span>1 year</span><span id="personalLoanYearsValue">4</span><span>10 years</span></div>
            </div>

            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-3">For properties that you are renting: Are you currently renting any property?</label>
                <label class="flex items-center mb-3">
                    <input type="checkbox" id="rentingProperty" class="w-5 h-5 text-blue-600 mr-3">
                    Yes, annual rental amount (S$)
                </label>
                <input type="number" id="annualRent" value="36000" min="0" class="conditional-input">
                <small class="text-blue-600">Pre-set value calculated for your profile. Edit for accuracy.</small>
            </div>
        </section>

        <!-- SECTION 4: About your financial resources (EXACT LIA) -->
        <section id="section4" class="section">
            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-3">
                    What is the value of your Savings (i.e., Cash, and Bank Deposits) that may be used to meet your Dependants' Mortality Needs, in the event of your passing or if you are diagnosed with total/permanent disability or terminal illness?
                </label>
                <input type="number" id="savingsMortality" value="190000" min="0">
                <small class="text-blue-600">Pre-set value calculated for your profile. Edit for accuracy.</small>
            </div>

            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-3">
                    What is the value of Other Financial Resources (e.g., Investments) that may be used to meet your Dependants' Mortality Needs, in the event of your passing or if you are diagnosed with total/permanent disability or terminal illness?
                </label>
                <input type="number" id="investmentsMortality" value="0" min="0">
                <small class="text-blue-600">Pre-set value calculated for your profile. Edit for accuracy.</small>
            </div>

            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-3">
                    What is the value of your Savings (i.e., Cash, and Bank Deposits) that may be used to meet your Dependants' and Your Living Needs/Medical Expenses, should you be diagnosed with a major illness?
                </label>
                <input type="number" id="savingsCI" value="0" min="0">
            </div>

            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-3">
                    What is the value of Other Financial Resources (e.g., Investments) that may be used to meet your Dependants' and Your Living Needs/Medical Expenses, should you be diagnosed with a major illness?
                </label>
                <input type="number" id="investmentsCI" value="0" min="0">
            </div>

            <div class="input-group">
                <label class="block text-xl font-semibold text-gray-900 mb-3">
                    What is the combined value of your savings across all CPF Accounts that you own?
                </label>
                <input type="number" id="totalCPF" value="130000" min="0">
                <small>
                    Please refer to CPF <a href="https://www.cpf.gov.sg/member/cpf-overview" target="_blank" class="text-blue-600 hover:underline">cpf.gov.sg/member/cpf-overview</a> for an overview of the CPF Accounts available
                </small>
            </div>
        </section>

        <!-- Navigation Buttons -->
        <div class="flex justify-between mt-12">
            <button class="btn-nav" onclick="prevSection()">← Previous</button>
            <button class="btn-primary" onclick="nextSection()">Next →</button>
        </div>

        <!-- Calculate Button -->
        <div id="calculateBtn" class="text-center mt-8" style="display: none;">
            <button class="btn-primary text-xl px-12 py-4" onclick="calculateProtection()">Calculate Protection Gap</button>
        </div>
    </div>

    <script>
        let currentSection = 1;
        const totalSections = 4;

        // Initialize all sliders
        function initSliders() {
            ['age', 'spouseAge', 'childAgeNormal', 'childAgeSpecial', 'otherDependantAge', 'dependantsLifeExpectancy', 
             'ciRecoveryPeriod', 'mortgageYearsLeft', 'personalLoanYears'].forEach(id => {
                const slider = document.getElementById(id);
                if (slider) {
                    const valueSpan = document.getElementById(id + 'Value') || document.getElementById(id.replace('YearsLeft', 'Value'));
                    slider.addEventListener('input', function() {
                        if (valueSpan) valueSpan.textContent = this.value;
                    });
                    if (valueSpan) valueSpan.textContent = slider.value;
                }
            });
        }

        // Children total calculation
        function updateTotalChildren() {
            const normal = parseInt(document.getElementById('childrenNormal').value) || 0;
            const special = parseInt(document.getElementById('childrenSpecial').value) || 0;
            document.getElementById('totalChildren').textContent = normal + special;
        }

        // Checkbox toggles
        document.getElementById('hasMortgage').addEventListener('change', function() {
            document.getElementById('mortgageAmount').classList.toggle('show', this.checked);
        });
        document.getElementById('hasPersonalLoan').addEventListener('change', function() {
            document.getElementById('personalLoanAmount').classList.toggle('show', this.checked);
        });
        document.getElementById('rentingProperty').addEventListener('change', function() {
            document.getElementById('annualRent').classList.toggle('show', this.checked);
        });

        // Section navigation
        document.querySelectorAll('.section-nav span').forEach(span => {
            span.addEventListener('click', function() {
                const section = parseInt(this.dataset.section);
                if (section <= currentSection) goToSection(section);
            });
        });

        function nextSection() {
            if (currentSection < totalSections) goToSection(currentSection + 1);
        }

        function prevSection() {
            if (currentSection > 1) goToSection(currentSection - 1);
        }

        function goToSection(section) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.section-nav span').forEach(s => s.classList.remove('active'));
            
            document.getElementById(`section${section}`).classList.add('active');
            document.querySelector(`[data-section="${section}"]`).classList.add('active');
            
            currentSection = section;
            document.getElementById('calculateBtn').style.display = section === totalSections ? 'block' : 'none';
        }

        function calculateProtection() {
            const resources = parseInt(document.getElementById('totalCPF').value || 0) + 
                            parseInt(document.getElementById('savingsMortality').value || 0) +
                            parseInt(document.getElementById('investmentsMortality').value || 0);
            const overheads = 500000; // Simplified calculation
            
            const protectionLevel = Math.min((resources / overheads) * 100, 100);
            const statusEl = document.getElementById('protectionStatus');
            
            statusEl.style.display = 'block';
            
            if (protectionLevel < 60) {
                statusEl.className = 'protection-status status-gap';
                statusEl.innerHTML = `
                    <div class="text-2xl font-bold mb-3">Please note that you are currently facing a protection gap</div>
                    <div class="text-lg">as the value of your resources is lower than your overheads 
                        *(i.e., your protection level <span class="font-bold text-red-700">is below</span> the baseline of 60%)*
                    </div>
                    <div class="text-sm mt-3 font-medium">Please take the necessary actions today to narrow your protection gap</div>
                `;
            } else if (protectionLevel < 80) {
                statusEl.className = 'protection-status status-moderate';
                statusEl.innerHTML = `
                    <div class="text-2xl font-bold mb-3">Well done! You are currently moderately protected</div>
                    <div class="text-lg">as your resources are higher than your overheads 
                        *(i.e., your protection level <span class="font-bold text-amber-700">has met</span> the baseline of 60%)*
                    </div>
                    <div class="text-sm mt-3 font-medium">Please remain vigilant and review your resources and overheads regularly</div>
                `;
            } else {
                statusEl.className = 'protection-status status-well';
                statusEl.innerHTML = `
                    <div class="text-2xl font-bold mb-3">Congratulations! You are currently well-protected</div>
                    <div class="text-lg">as your resources are much higher than your overheads 
                        *(i.e., your protection level <span class="font-bold text-green-700">has exceeded</span> the baseline of 60%)*
                    </div>
                    <div class="text-sm mt-3 font-medium">Please remain vigilant and review your resources and overheads regularly</div>
                `;
            }
        }

        // Initialize
        initSliders();
        document.getElementById('childrenNormal').addEventListener('input', updateTotalChildren);
        document.getElementById('childrenSpecial').addEventListener('input', updateTotalChildren);
        updateTotalChildren();
    </script>
</body>
</html>
