<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIA Protection Gap Calculator - Singapore</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary-blue: #1e40af;
            --secondary-blue: #3b82f6;
            --success-green: #10b981;
            --warning-orange: #f59e0b;
            --danger-red: #ef4444;
        }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .section-nav { 
            display: flex; gap: 0.5rem; margin-bottom: 2rem; 
            font-weight: 500; font-size: 0.95rem;
        }
        .section-nav .active { 
            color: var(--primary-blue); font-weight: 700; 
            border-bottom: 3px solid var(--primary-blue);
        }
        .section-nav span:not(.active) { 
            color: #6b7280; cursor: pointer; padding: 0.25rem 0; 
        }
        .protection-status {
            text-align: center; padding: 2rem; border-radius: 12px; 
            margin-bottom: 2rem; font-weight: 600;
        }
        .status-gap { background: linear-gradient(135deg, #fee2e2, #fecaca); border: 2px solid var(--danger-red); color: #dc2626; }
        .status-moderate { background: linear-gradient(135deg, #fef3c7, #fde68a); border: 2px solid var(--warning-orange); color: #d97706; }
        .status-well { background: linear-gradient(135deg, #d1fae5, #a7f3d0); border: 2px solid var(--success-green); color: #047857; }
        .input-group { margin-bottom: 1.5rem; }
        .input-row { display: flex; gap: 1rem; margin-bottom: 1.5rem; }
        .input-row .input-group { flex: 1; }
        input[type="number"], select { 
            width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; 
            border-radius: 8px; font-size: 1rem; transition: all 0.2s;
        }
        input:focus, select:focus { outline: none; border-color: var(--primary-blue); box-shadow: 0 0 0 3px rgba(30,64,175,0.1); }
        .checkbox-group label { display: flex; align-items: center; font-weight: 500; cursor: pointer; }
        .checkbox-group input[type="checkbox"] { width: 20px; height: 20px; margin-right: 0.75rem; accent-color: var(--primary-blue); }
        .conditional-input { display: none; margin-top: 0.75rem; }
        .conditional-input.show { display: block; }
        small { display: block; color: #6b7280; font-size: 0.875rem; margin-top: 0.5rem; }
        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .btn-primary { 
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue)); 
            color: white; padding: 1rem 2.5rem; border: none; border-radius: 12px; 
            font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s;
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(30,64,175,0.3); }
        .btn-nav { background: none; border: none; color: #6b7280; cursor: pointer; padding: 0.5rem; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen py-12 px-4">
    <div class="max-w-3xl mx-auto bg-white/80 backdrop-blur-xl shadow-2xl rounded-3xl p-10 border border-white/50">
        
        <!-- Header matching LIA style -->
        <div class="text-center mb-10">
            <h1 class="text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-4">
                HOW WELL PROTECTED ARE YOU?
            </h1>
            <p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">
                Assess your protection gap and ensure your loved ones remain financially secure
            </p>
        </div>

        <!-- Protection Status Cards (LIA exact messaging) -->
        <div id="protectionStatus" class="protection-status status-gap" style="display: none;">
            <div class="text-2xl font-bold mb-3">Please note that you are currently facing a protection gap</div>
            <div class="text-lg">as the value of your resources is lower than your overheads *(i.e., your protection level <span class="font-bold text-red-700">is below</span> the baseline of 60%)*</div>
            <div class="text-sm mt-3 font-medium">Please take the necessary actions today to narrow your protection gap</div>
        </div>

        <!-- Section Navigation (CPF/LIA Style) -->
        <div class="section-nav">
            <span class="active" data-section="1">1. About you</span>
            <span data-section="2">2. About your family</span>
            <span data-section="3">3. About your financial overheads</span>
            <span data-section="4">4. About your financial resources</span>
        </div>

        <!-- Section 1: About You -->
        <section id="section1" class="section active">
            <!-- Add your existing "About You" fields here -->
            <div class="input-group">
                <label class="block text-lg font-semibold text-gray-900 mb-3">What is your age?</label>
                <input type="range" id="age" min="20" max="100" value="40" class="w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                <div class="flex justify-between text-sm text-gray-600 mt-2"><span>20 years old</span><span id="ageValue">40</span><span>100 years old</span></div>
            </div>
            <div class="grid grid-cols-2 gap-4 mb-8">
                <div class="input-group">
                    <label class="block text-lg font-semibold text-gray-900 mb-3">Gender</label>
                    <select id="gender">
                        <option>Male</option>
                        <option>Female</option>
                    </select>
                </div>
                <div class="input-group">
                    <label class="block text-lg font-semibold text-gray-900 mb-3">Smoker?</label>
                    <select id="smoker">
                        <option>No</option>
                        <option>Yes</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- Section 2: About Family (with your additions) -->
        <section id="section2" class="section">
            <!-- Your existing family fields + additions -->
            <div class="input-group">
                <h3 class="text-xl font-semibold text-gray-900 mb-4">Children with special needs?</h3>
                <label class="checkbox-group">
                    <input type="checkbox" id="specialNeedsChildren">
                    Yes
                </label>
                <input type="number" id="specialNeedsAges" class="conditional-input" placeholder="Age(s)">
            </div>
            <div class="input-group">
                <h3 class="text-xl font-semibold text-gray-900 mb-3">Dependants' life expectancy (years)</h3>
                <input type="number" id="dependantsLifeExpectancy" value="80" min="0">
            </div>
        </section>

        <!-- Section 3: Financial Overheads (with your additions) -->
        <section id="section3" class="section">
            <!-- Your existing overheads + additions -->
            <div class="input-group">
                <h3 class="text-xl font-semibold text-gray-900 mb-3">Mortgage years remaining</h3>
                <input type="number" id="mortgageYearsLeft" value="20" min="0">
            </div>
            <div class="input-row">
                <div class="input-group">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">CI Recovery Period</h3>
                    <select id="ciRecoveryPeriod">
                        <option value="1">1 year</option>
                        <option value="3" selected>3 years</option>
                        <option value="5">5 years</option>
                        <option value="7">7 years</option>
                        <option value="10">10+ years</option>
                    </select>
                </div>
                <div class="input-group">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Renting property?</h3>
                    <label class="checkbox-group">
                        <input type="checkbox" id="rentingProperty">
                        Yes (annual S$)
                    </label>
                    <input type="number" id="annualRent" class="conditional-input" placeholder="S$">
                </div>
            </div>
        </section>

        <!-- Section 4: Financial Resources (your complete replacement) -->
        <section id="section4" class="section">
            <div class="input-row">
                <div class="input-group">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Savings - Mortality Needs</h3>
                    <input type="number" id="savingsMortality" value="190000" min="0">
                    <small>Cash for dependants if you pass away</small>
                </div>
                <div class="input-group">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Investments - Mortality Needs</h3>
                    <input type="number" id="investmentsMortality" value="0" min="0">
                </div>
            </div>
            <div class="input-row">
                <div class="input-group">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Savings - CI/Living Needs</h3>
                    <input type="number" id="savingsCI" value="0" min="0">
                    <small>Cash for medical/living if diagnosed</small>
                </div>
                <div class="input-group">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Investments - CI/Living Needs</h3>
                    <input type="number" id="investmentsCI" value="0" min="0">
                </div>
            </div>
            <div class="input-group">
                <h3 class="text-xl font-semibold text-gray-900 mb-3">Total CPF (all accounts)</h3>
                <input type="number" id="totalCPF" value="130000" min="0">
            </div>
        </section>

        <!-- Navigation Buttons -->
        <div class="flex justify-between mt-12">
            <button class="btn-nav text-gray-500 hover:text-gray-700 font-medium" onclick="prevSection()">← Previous</button>
            <button class="btn-primary" onclick="nextSection()">Next →</button>
        </div>

        <!-- Calculate Button (final section only) -->
        <div id="calculateBtn" class="text-center mt-8" style="display: none;">
            <button class="btn-primary text-xl px-12 py-4" onclick="calculateProtection()">Calculate Protection Gap</button>
        </div>
    </div>

    <script>
        let currentSection = 1;
        const totalSections = 4;

        // Age slider
        document.getElementById('age').addEventListener('input', function() {
            document.getElementById('ageValue').textContent = this.value;
        });

        // Checkbox show/hide functionality
        document.getElementById('specialNeedsChildren').addEventListener('change', function() {
            document.getElementById('specialNeedsAges').classList.toggle('show', this.checked);
        });
        document.getElementById('rentingProperty').addEventListener('change', function() {
            document.getElementById('annualRent').classList.toggle('show', this.checked);
        });

        // Section navigation
        document.querySelectorAll('.section-nav span').forEach(span => {
            span.addEventListener('click', function() {
                const section = parseInt(this.dataset.section);
                if (section <= currentSection) {
                    goToSection(section);
                }
            });
        });

        function nextSection() {
            if (currentSection < totalSections) {
                goToSection(currentSection + 1);
            }
        }

        function prevSection() {
            if (currentSection > 1) {
                goToSection(currentSection - 1);
            }
        }

        function goToSection(section) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.section-nav span').forEach(s => s.classList.remove('active'));
            
            document.getElementById(`section${section}`).classList.add('active');
            document.querySelector(`[data-section="${section}"]`).classList.add('active');
            
            currentSection = section;
            document.getElementById('calculateBtn').style.display = section === totalSections ? 'block' : 'none';
        }

        function calculateProtection() {
            // LIA-style protection gap calculation
            const resources = parseInt(document.getElementById('totalCPF').value) + 
                            parseInt(document.getElementById('savingsMortality').value);
            const overheads = 500000; // Placeholder - calculate based on inputs
            
            const protectionLevel = Math.min((resources / overheads) * 100, 100);
            const statusEl = document.getElementById('protectionStatus');
            
            statusEl.style.display = 'block';
            
            if (protectionLevel < 60) {
                statusEl.className = 'protection-status status-gap';
                statusEl.innerHTML = `
                    <div class="text-2xl font-bold mb-3">Please note that you are currently facing a protection gap</div>
                    <div class="text-lg">as the value of your resources is lower than your overheads 
                        *(i.e., your protection level <span class="font-bold text-red-700">is below</span> the baseline of 60%)*
                    </div>
                    <div class="text-sm mt-3 font-medium">Please take the necessary actions today to narrow your protection gap</div>
                `;
            } else if (protectionLevel < 80) {
                statusEl.className = 'protection-status status-moderate';
                statusEl.innerHTML = `
                    <div class="text-2xl font-bold mb-3">Well done! You are currently moderately protected</div>
                    <div class="text-lg">as your resources are higher than your overheads 
                        *(i.e., your protection level <span class="font-bold text-amber-700">has met</span> the baseline of 60%)*
                    </div>
                    <div class="text-sm mt-3 font-medium">Please remain vigilant and review your resources and overheads regularly</div>
                `;
            } else {
                statusEl.className = 'protection-status status-well';
                statusEl.innerHTML = `
                    <div class="text-2xl font-bold mb-3">Congratulations! You are currently well-protected</div>
                    <div class="text-lg">as your resources are much higher than your overheads 
                        *(i.e., your protection level <span class="font-bold text-green-700">has exceeded</span> the baseline of 60%)*
                    </div>
                    <div class="text-sm mt-3 font-medium">Please remain vigilant and review your resources and overheads regularly</div>
                `;
            }
        }
    </script>
</body>
</html>
